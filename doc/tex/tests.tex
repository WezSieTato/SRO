\chapter{Testy}

\section{Plan testów}

Testy mają za zadanie sprawdzenie poprawności działania systemu, nie tylko w stanie ustabilizowanym, ale także w przypadkach awarii. Pomagają ustalić czy system zachowuje się zgodnie z przewidywaniami w konkretnych sytuacjach i przy danych scenariuszach. Test uznawany jest za zaliczony w momencie zachowania się systemu (w danej symulowanej sytuacji) w przewidywany przez nas sposób.

\subsection[Test protokołu]{Test protokołu}
\begin{enumerate}
\item Sprawdzenie poprawności przesyłanej ramki danych z węzła wewnętrznego do zewnętrznego oraz z zewnętrznego do wewnętrznego.
\item Sprawdzenie poprawności przesyłanej ramki danych z węzła zewnętrznego do klienta oraz od klienta do węzła zewnętrznego.
\end{enumerate}
	
\textit{Testy obejmują sprawdzenie poprawności serializacji oraz deserializacji danych przesyłanych między elementami systemu. Sprawdzone również zostanie połączenie między tymi elementami.}

\begin{enumerate}
\item zbudowanie wiadomości z danymi z serwera wewnętrznego/zewnętrznego do serwera zewnętrznego/wewnętrznego RSOMessage.
\item wysłanie tablicy bajtów do serwera zewnętrznego 
\item sprawdzenie poprawności przesłanych danych
\end{enumerate}


\subsection[Test bazy danych]{Test bazy danych}
\begin{enumerate}
\item Sprawdzenie połączenia z bazą danych.
\item Sprawdzenie poprawności działania algorytmu aktualizacji danych systemu. \\
\textit{Test obejmuje sprawdzenie algorytmu wykorzystującego Token Ring do aktualizacji danych. Weryfikacji zostanie podany również konfigurowalny czas posiadania tokena przez węzeł.}
\item Sprawdzenie redundancji danych.
\end{enumerate}

\subsection[Test przetwarzania danych]{Test przetwarzania danych}
Sprawdzenie czy węzeł zewnętrzny poprawnie przetwarza dane wrażliwe na dane gotowe do wysłania klientowi. Wysyłane dane powinny zawierać numer identyfikacyjny oraz listę przedmiotów.

\subsection[Test algorytmu Heartbeatów]{Test algorytmu Heartbeatów}
Sprawdzenie czy węzły zewnętrzne poprawnie komunikują się między sobą oraz czy poprawnie interpretowane są braki komunikacji.

Sprawdzenie działania algorytmu dla interwału czasowego równego: 5, 30 oraz 60 sekund:
\begin{enumerate}
\item dodanie trzech węzłów zewnętrznych
\item wysłanie wiadomości Heartbeat
\item oczekiwanie całego interwału na Heartbeat zwrotny
\item (Przypadek 1) Heartbeat przyszedł, zerowanie timera
\item (Przypadek 2) Heartbeat nie przyszedł, wysłanie TestRequesta
\item (Przypadek 2.1) Heartbeat przyszedł, zerowanie timera
\item (Przypadek 2.2) Heartbeat nie przyszedł, uznanie węzła za nieaktywny
\end{enumerate}

\subsection[Testy połączeniowe węzłów]{Testy połączeniowe węzłów}
Służą sprawdzeniu czy w przypadkach awaryjnych system zachowa się przewidywalnie i zastosuje odpowiednie operacje służące zachowaniu stanu ustalonego oraz odpowiedniej synchronizacji.

\begin{enumerate}
\item Test podłączenia węzła wewnętrznego
	\begin{enumerate}
	\item Brak innych węzłów
	\item Dołączanie do istniejącej struktury pierścienia
	\end{enumerate}
\item Test podłączenia węzła zewnętrznego
	\begin{enumerate}
	\item Brak innych węzłów
	\item Dołączanie do istniejącej struktury pierścienia
	\end{enumerate}
\item Test awarii węzła wewnętrznego
	\begin{enumerate}
	\item Węzeł rozłącza się permanentnie
	\item Węzeł rozłącza się, a po chwili podłącza ponownie
	\item Awaria więcej niż jednego węzła na raz
	\end{enumerate}
\item Test awarii węzła zewnętrznego
	\begin{enumerate}
	\item Węzeł rozłącza się permanentnie
			\begin{enumerate}
			\item Węzeł bezczynny
			\item Węzeł w trakcie synchronizacji
			\item Węzeł w trakcie obsługi żądania
			\end{enumerate}
	\item Węzeł rozłącza się, a po chwili podłącza ponownie
			\begin{enumerate}
			\item Węzeł bezczynny
			\item Węzeł w trakcie synchronizacji
			\item Węzeł w trakcie obsługi żądania
			\end{enumerate}
	\item Awaria więcej niż jednego węzła na raz
	\end{enumerate}
\end{enumerate}

\subsection[Testy bezpieczeństwa]{Testy bezpieczeństwa}
Sprawdzają czy system posiada dostatecznie wysoki poziom bezpieczeństwa przy danych scenariuszach. 

\begin{enumerate}
\item Test podłączenia ,,obcego'' węzła zewnętrznego
	\begin{enumerate}
	\item całkowicie nowy węzeł
	\item węzeł ,,podszywający'' się pod inny, rozłączony
	\end{enumerate}
\item Test podłączenia obcego węzła wewnętrznego
	\begin{enumerate}
	\item całkowicie nowy węzeł
	\item węzeł ,,podszywający'' się pod inny, rozłączony
	\end{enumerate}

\end{enumerate}